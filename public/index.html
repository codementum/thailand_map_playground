<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Thailand Map Data Visualisation</title>

<!--    <script src="https://d3js.org/d3.v6.min.js"></script>-->
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://d3js.org/d3-geo-projection.v3.min.js"></script>
    <script src="js/map.js"></script>
</head>
<body>
    <h2>Welcome</h2>


    <script>
        console.log(d3)

        let width = 960,
            height = 700,
            centered;

        Promise.all([
            d3.json("thailand.json"),
            d3.csv("coordinates.csv")
        ]).then( ([mapData ,coordinates]) => {
            createMap(mapData, coordinates)
        })

        function createMap(mapData, coordinates) {

            var svg = d3.select("body").append("svg")
                .attr("width", width)
                .attr("height", height);

            var g = svg.append('g');
            var mapLayer = g.append('g')
                .classed('map-layer', true);

            let proj = d3.geo.mercator()
                .rotate([-100.6331, -13.2])
                .translate([width / 2, height / 2])
                .scale(2500)

            let path = d3.geo.path()
                .projection(proj    )


            d3.json("thailand.json", function(mapData) {
                mapLayer.selectAll("path").data(mapData.features)
                    .enter().append("path")
                    .attr("d", path)
                        .attr("d", function(d) { return path(d) })
                        .attr("stroke-width", 1)
                        .attr("stroke", "#ffffff")
                        .style("fill", function() { return "#FFD061" });
            });

            // d3.select("svg")
            //     .selectAll("path")
            //     .data(mapData.features)
            //     .enter()
            //     .append("path")
            //     .attr("d", function(d) { return path(d) })
            //     .attr("stroke-width", 1)
            //     .attr("stroke", "252525")
        }


    </script>

    <svg></svg>

</body>
</html>
